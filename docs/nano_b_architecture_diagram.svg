<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="white" stroke="black" stroke-width="2"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="black">
    FeatherFace Nano-B Enhanced Architecture (2024)
  </text>
  
  <!-- Input Image -->
  <rect x="50" y="100" width="80" height="80" fill="#f0f0f0" stroke="black" stroke-width="2"/>
  <text x="90" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="black">Input</text>
  <text x="90" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="black">640Ã—640Ã—3</text>
  <text x="90" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="gray">Image</text>
  
  <!-- Arrow to Backbone -->
  <line x1="130" y1="140" x2="180" y2="140" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Backbone MobileNet -->
  <rect x="190" y="100" width="120" height="80" fill="#e0e0e0" stroke="black" stroke-width="2"/>
  <text x="250" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">MobileNet-0.25</text>
  <text x="250" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="black">Backbone</text>
  <text x="250" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="gray">~60K params</text>
  <text x="250" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="gray">Feature Extract</text>
  
  <!-- Arrow to Multi-scale -->
  <line x1="310" y1="140" x2="360" y2="140" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Multi-scale Features Title -->
  <text x="420" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">Multi-scale Features</text>
  
  <!-- P3 Branch (Blue - Small Faces) -->
  <rect x="370" y="100" width="100" height="50" fill="#cce7ff" stroke="#0066cc" stroke-width="2"/>
  <text x="420" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0066cc">P3 (64ch)</text>
  <text x="420" y="128" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0066cc">80Ã—80</text>
  <text x="420" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#004499">Small Faces ğŸ”</text>
  
  <!-- P4 Branch (Red - Medium Faces) -->
  <rect x="370" y="170" width="100" height="50" fill="#ffe0e0" stroke="#cc0000" stroke-width="2"/>
  <text x="420" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#cc0000">P4 (128ch)</text>
  <text x="420" y="198" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#cc0000">40Ã—40</text>
  <text x="420" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#990000">Medium ğŸ‘ï¸</text>
  
  <!-- P5 Branch (Green - Large Faces) -->
  <rect x="370" y="240" width="100" height="50" fill="#e0ffe0" stroke="#00aa00" stroke-width="2"/>
  <text x="420" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#00aa00">P5 (256ch)</text>
  <text x="420" y="268" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#00aa00">20Ã—20</text>
  <text x="420" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#007700">Large ğŸ”­</text>
  
  <!-- Enhanced Processing Title -->
  <text x="600" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="purple">Enhanced Processing (2024)</text>
  
  <!-- P3 Enhanced Path -->
  <!-- Scale Decoupling -->
  <rect x="500" y="95" width="70" height="25" fill="#fff2cc" stroke="#d6b656" stroke-width="1"/>
  <text x="535" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#bf9000">ğŸ§¹ ScaleDecoup</text>
  
  <!-- CBAM -->
  <rect x="580" y="95" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="605" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">CBAM</text>
  
  <!-- BiFPN -->
  <rect x="640" y="95" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="665" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">BiFPN</text>
  
  <!-- Semantic Enhancement -->
  <rect x="700" y="95" width="70" height="25" fill="#e6ccff" stroke="#9933cc" stroke-width="1"/>
  <text x="735" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7700aa">ğŸŒ‰ Semantic</text>
  
  <!-- ASSN -->
  <rect x="780" y="95" width="50" height="25" fill="#ffcc99" stroke="#ff6600" stroke-width="1"/>
  <text x="805" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#cc4400">ğŸ¯ ASSN</text>
  
  <!-- P4 Standard Path -->
  <rect x="500" y="165" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="525" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">CBAM</text>
  
  <rect x="560" y="165" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="585" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">BiFPN</text>
  
  <rect x="620" y="165" width="70" height="25" fill="#e6ccff" stroke="#9933cc" stroke-width="1"/>
  <text x="655" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7700aa">ğŸŒ‰ Semantic</text>
  
  <rect x="700" y="165" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="725" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">CBAM</text>
  
  <!-- P5 Standard Path -->
  <rect x="500" y="235" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="525" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">CBAM</text>
  
  <rect x="560" y="235" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="585" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">BiFPN</text>
  
  <rect x="620" y="235" width="70" height="25" fill="#e6ccff" stroke="#9933cc" stroke-width="1"/>
  <text x="655" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7700aa">ğŸŒ‰ Semantic</text>
  
  <rect x="700" y="235" width="50" height="25" fill="#f0f0f0" stroke="black" stroke-width="1"/>
  <text x="725" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="black">CBAM</text>
  
  <!-- Arrows between modules -->
  <!-- P3 arrows -->
  <line x1="470" y1="107" x2="500" y2="107" stroke="#0066cc" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="107" x2="580" y2="107" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="630" y1="107" x2="640" y2="107" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="690" y1="107" x2="700" y2="107" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="770" y1="107" x2="780" y2="107" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- P4 arrows -->
  <line x1="470" y1="177" x2="500" y2="177" stroke="#cc0000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="550" y1="177" x2="560" y2="177" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="610" y1="177" x2="620" y2="177" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="690" y1="177" x2="700" y2="177" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- P5 arrows -->
  <line x1="470" y1="247" x2="500" y2="247" stroke="#00aa00" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="550" y1="247" x2="560" y2="247" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="610" y1="247" x2="620" y2="247" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  <line x1="690" y1="247" x2="700" y2="247" stroke="black" stroke-width="1" marker-end="url(#arrowhead)"/>
  
  <!-- Detection Heads -->
  <text x="900" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">Detection</text>
  
  <!-- SSH Multi-Branch + Shuffle -->
  <rect x="840" y="100" width="100" height="60" fill="#f5f5f5" stroke="black" stroke-width="2"/>
  <text x="890" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="black">SSH Standard</text>
  <text x="890" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">3Ã—3 | 5Ã—5 | 7Ã—7</text>
  <text x="890" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">ICCV 2017</text>
  <text x="890" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="black">+ Channel Shuffle</text>
  <text x="890" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="gray">Concat â†’ ReLU</text>
  
  <!-- Output boxes -->
  <rect x="960" y="95" width="60" height="25" fill="#ffeeee" stroke="#cc0000" stroke-width="1"/>
  <text x="990" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#cc0000">Classification</text>
  
  <rect x="960" y="125" width="60" height="25" fill="#eeffee" stroke="#00cc00" stroke-width="1"/>
  <text x="990" y="138" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#00cc00">BBox Reg</text>
  
  <rect x="960" y="155" width="60" height="25" fill="#eeeeff" stroke="#0000cc" stroke-width="1"/>
  <text x="990" y="168" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0000cc">Landmarks</text>
  
  <!-- Arrows to detection -->
  <line x1="830" y1="107" x2="840" y2="130" stroke="#0066cc" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="177" x2="840" y2="130" stroke="#cc0000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="247" x2="840" y2="130" stroke="#00aa00" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow to output -->
  <line x1="940" y1="130" x2="960" y2="120" stroke="black" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Final output -->
  <text x="1050" y="108" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="black">[2]</text>
  <text x="1050" y="138" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="black">[4]</text>
  <text x="1050" y="168" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="black">[10]</text>
  
  <!-- Legend -->
  <text x="100" y="350" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="black">2024 Enhancements:</text>
  
  <rect x="100" y="370" width="15" height="15" fill="#fff2cc" stroke="#d6b656"/>
  <text x="125" y="382" font-family="Arial, sans-serif" font-size="11" fill="black">ğŸ§¹ Scale Decoupling (P3 only) - Removes large objects</text>
  
  <rect x="100" y="395" width="15" height="15" fill="#ffcc99" stroke="#ff6600"/>
  <text x="125" y="407" font-family="Arial, sans-serif" font-size="11" fill="black">ğŸ¯ ASSN (P3 only) - Scale sequence attention</text>
  
  <rect x="100" y="420" width="15" height="15" fill="#e6ccff" stroke="#9933cc"/>
  <text x="125" y="432" font-family="Arial, sans-serif" font-size="11" fill="black">ğŸŒ‰ Semantic Enhancement (All levels) - Feature fusion quality</text>
  
  <!-- Research references -->
  <text x="100" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">Scientific Foundation:</text>
  <text x="100" y="490" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ SSH: Najibi et al. ICCV 2017</text>
  <text x="100" y="505" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ CBAM: Woo et al. ECCV 2018</text>
  <text x="100" y="520" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ BiFPN: Tan et al. CVPR 2020</text>
  
  <!-- Performance info -->
  <text x="600" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="black">Performance Impact:</text>
  <text x="600" y="490" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ Total Parameters: ~149.5K (with SSH standard)</text>
  <text x="600" y="505" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ SSH Standard: ~13.5K params (9.0%)</text>
  <text x="600" y="520" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ Scientific Foundation: ICCV 2017</text>
  <text x="600" y="535" font-family="Arial, sans-serif" font-size="10" fill="black">â€¢ Target Pruned: 120K-180K (Bayesian optimization)</text>
  
  <!-- Bidirectional arrows for BiFPN -->
  <line x1="665" y1="130" x2="665" y2="160" stroke="black" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="665" y1="200" x2="665" y2="230" stroke="black" stroke-width="1" stroke-dasharray="3,3"/>
  <text x="670" y="145" font-family="Arial, sans-serif" font-size="8" fill="gray">Bidirectional</text>
  <text x="670" y="155" font-family="Arial, sans-serif" font-size="8" fill="gray">Feature Fusion</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="black"/>
    </marker>
  </defs>
  
  <!-- Border -->
  <rect x="10" y="10" width="1180" height="780" fill="none" stroke="black" stroke-width="3"/>
  
</svg>